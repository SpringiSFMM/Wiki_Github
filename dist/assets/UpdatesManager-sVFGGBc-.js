import{e as m,b as p,j as e,f as u,a}from"./index-Cf1eI5hH.js";import{b as h,L as j}from"./vendor-CPt1K6Li.js";import{u as f}from"./useMutation-DI0lfsM0.js";import{A as y,y as N,z as w,D as g,V as r}from"./ui-Rj_xN0Fu.js";import{u as k}from"./auth-JTDanQEO.js";function C(){const d=h(),i=m();k();const{data:s=[],isLoading:n,isError:l}=p({queryKey:["admin-updates"],queryFn:async()=>(await a.get("/api/admin/updates")).data}),c=f({mutationFn:async t=>{await a.delete(`/api/admin/updates/${t}`)},onSuccess:()=>{i.invalidateQueries({queryKey:["admin-updates"]}),r.success("Update deleted successfully")},onError:()=>{r.error("Failed to delete update")}}),x=(t,o)=>{window.confirm(`Are you sure you want to delete "${o}"?`)&&c.mutate(t)};return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-dark-300",children:"Loading updates..."})}):l?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx(y,{className:"h-8 w-8 text-red-500 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-dark-200 mb-2",children:"Error Loading Updates"}),e.jsx("p",{className:"text-dark-300",children:"Failed to load updates. Please try again later."})]}):e.jsx("div",{className:"bg-dark-950 text-dark-200 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-neon-400",children:"Updates Manager"}),e.jsxs(j,{to:"/admin/updates/new",className:"flex items-center bg-neon-500 hover:bg-neon-600 text-dark-950 px-4 py-2 rounded-md transition-colors",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"New Update"]})]}),e.jsx("div",{className:"bg-dark-900 rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-dark-800",children:[e.jsx("thead",{className:"bg-dark-850",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-dark-400 uppercase tracking-wider",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-dark-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-dark-400 uppercase tracking-wider",children:"Author"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-dark-400 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-dark-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-dark-900 divide-y divide-dark-800",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-dark-400",children:"No updates found. Create your first update!"})}):s.map(t=>e.jsxs("tr",{className:"hover:bg-dark-850",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-dark-200",children:t.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-dark-300",children:t.author})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-300",children:u(new Date(t.updated_at),"MMM d, yyyy HH:mm")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>d(`/admin/updates/${t.id}`),className:"text-neon-400 hover:text-neon-300",title:"Edit",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(t.id,t.title),className:"text-red-500 hover:text-red-400",title:"Delete",children:e.jsx(g,{className:"h-4 w-4"})})]})})]},t.id))})]})})})]})})}export{C as UpdatesManager};
