import{c as m,i as u,k as b,u as j,R as k,a as o,j as e,L as x,d,V as h}from"./index-D4ivp__p.js";import{E as v}from"./eye-DMziO0sd.js";import{U as w}from"./users-CquD4XJb.js";import{P as f,S as N,T as $}from"./trash-2-DuL1LNoS.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=m("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=m("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function V(){const i=u();b();const{isDarkMode:t}=j(),[l,s]=k.useState(null),{data:r={totalArticles:0,totalViews:0,activeEditors:0,articlesThisMonth:0}}=o({queryKey:["dashboardStats"],queryFn:async()=>(await d.get("/api/admin/stats")).data,refetchInterval:1e4}),{data:c=[]}=o({queryKey:["recentArticles"],queryFn:async()=>{const a=await d.get("/api/admin/articles/recent");return Array.isArray(a.data)?a.data:[]},refetchInterval:1e4}),y=async a=>{try{await d.delete(`/api/admin/articles/${a}`),i.invalidateQueries({queryKey:["recentArticles"]}),i.invalidateQueries({queryKey:["dashboardStats"]}),h.success("Article deleted successfully"),s(null)}catch{h.error("Failed to delete article")}},p=[{label:"Total Articles",value:(r==null?void 0:r.totalArticles)??0,icon:M},{label:"Total Views",value:(r==null?void 0:r.totalViews)??0,icon:v},{label:"Active Editors",value:(r==null?void 0:r.activeEditors)??0,icon:w},{label:"Articles This Month",value:(r==null?void 0:r.articlesThisMonth)??0,icon:A}];return e.jsxs("div",{className:`p-6 space-y-8 ${t?"bg-dark-950":"bg-gray-100"} min-h-screen`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-cyto-400":"text-cyto-600"}`,children:"Dashboard Overview"}),e.jsxs(x,{to:"/admin/articles/new",className:`flex items-center px-4 py-2 ${t?"bg-cyto-600 hover:bg-cyto-500":"bg-cyto-500 hover:bg-cyto-600"} text-white rounded-lg transition-colors`,children:[e.jsx(f,{className:"h-5 w-5 mr-2"}),"New Article"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((a,n)=>{const g=a.icon;return e.jsx("div",{className:`rounded-xl p-6 border transition-all duration-300 hover:shadow-lg ${t?"bg-dark-900 border-dark-800 hover:shadow-dark-950/30":"bg-white border-gray-200 hover:shadow-gray-200/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`mb-2 ${t?"text-dark-300":"text-gray-600"}`,children:a.label}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-cyto-400":"text-cyto-600"}`,children:a.value})]}),e.jsx("div",{className:`p-3 rounded-lg ${t?"bg-cyto-500/10":"bg-cyto-500/5"}`,children:e.jsx(g,{className:`h-6 w-6 ${t?"text-cyto-400":"text-cyto-600"}`})})]})},n)})}),e.jsxs("div",{className:`rounded-xl border transition-all duration-300 ${t?"bg-dark-900 border-dark-800":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"p-6 border-b border-dark-800",children:e.jsx("h2",{className:`text-xl font-semibold ${t?"text-white":"text-dark-900"}`,children:"Recent Articles"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:t?"border-b border-dark-800 bg-dark-800/50":"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Author"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Category"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Last Modified"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-dark-800":"divide-gray-200"}`,children:c.length>0?c.map(a=>e.jsxs("tr",{className:`transition-colors ${t?"hover:bg-dark-800/50":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-white":"text-gray-900"}`,children:a.title}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-dark-300":"text-gray-500"}`,children:a.author}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-dark-300":"text-gray-500"}`,children:a.category}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-dark-300":"text-gray-500"}`,children:a.lastModified}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${a.status==="published"?t?"bg-green-800/20 text-green-400":"bg-green-100 text-green-800":t?"bg-amber-800/20 text-amber-400":"bg-amber-100 text-amber-800"}`,children:a.status==="published"?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(x,{to:`/admin/articles/${a.id}`,className:`p-1 rounded-md ${t?"text-dark-300 hover:text-white hover:bg-dark-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>s(a.id),className:`p-1 rounded-md ${t?"text-dark-300 hover:text-white hover:bg-red-900/20":"text-gray-500 hover:text-gray-700 hover:bg-red-100"}`,children:e.jsx($,{className:"h-4 w-4"})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:`px-6 py-4 text-center text-sm ${t?"text-dark-300":"text-gray-500"}`,children:"No articles found"})})})]})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`rounded-xl p-6 max-w-md w-full ${t?"bg-dark-900":"bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Confirm Deletion"}),e.jsx("p",{className:`mb-6 ${t?"text-dark-300":"text-gray-500"}`,children:"Are you sure you want to delete this article? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>s(null),className:`px-4 py-2 rounded-lg ${t?"bg-dark-800 text-dark-300 hover:bg-dark-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:()=>y(l),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}export{V as Dashboard};
