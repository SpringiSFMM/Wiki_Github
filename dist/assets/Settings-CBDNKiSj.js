import{e as C,b as y,j as e,a as d}from"./index-Cf1eI5hH.js";import{R as l}from"./vendor-CPt1K6Li.js";import{u as b}from"./useMutation-DI0lfsM0.js";import{e as M,N as w,t as E,u as F,s as q,V as n}from"./ui-Rj_xN0Fu.js";import{u as A}from"./auth-JTDanQEO.js";function L(){const g=C();A();const[t,c]=l.useState({maintenanceMode:!1,maintenanceMessage:""}),[r,u]=l.useState({username:"",email:""}),[a,i]=l.useState({current:"",new:"",confirm:""}),[o,v]=l.useState(!1),{data:m}=y({queryKey:["settings"],queryFn:async()=>(await d.get("/api/admin/settings")).data}),{data:x}=y({queryKey:["adminProfile"],queryFn:async()=>(await d.get("/api/admin/profile")).data});l.useEffect(()=>{m&&c(m),x&&u(x)},[m,x]);const p=b({mutationFn:async s=>d.put("/api/admin/settings",s),onSuccess:()=>{g.invalidateQueries({queryKey:["settings"]}),n.success("Settings updated successfully")},onError:()=>{n.error("Failed to update settings")}}),f=b({mutationFn:async s=>d.put("/api/admin/profile",s),onSuccess:()=>{g.invalidateQueries({queryKey:["adminProfile"]}),n.success("Profile updated successfully")},onError:()=>{n.error("Failed to update profile")}}),h=b({mutationFn:async s=>d.put("/api/admin/change-password",s),onSuccess:()=>{i({current:"",new:"",confirm:""}),n.success("Password changed successfully")},onError:s=>{var k,j;n.error(((j=(k=s.response)==null?void 0:k.data)==null?void 0:j.message)||"Failed to change password")}}),N=()=>{p.mutate(t)},P=()=>{f.mutate(r)},S=()=>{if(a.new!==a.confirm){n.error("New passwords do not match");return}h.mutate(a)};return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-neon-400",children:"Settings"}),e.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neon-400 mb-4",children:"Maintenance Mode"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.maintenanceMode,onChange:s=>c({...t,maintenanceMode:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-dark-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-neon-500/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-neon-600"})]}),e.jsx("span",{className:"text-dark-200",children:"Enable Maintenance Mode"})]}),t.maintenanceMode&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-sm text-yellow-500",children:"When maintenance mode is enabled, only administrators can access the site. All other users will see the maintenance message."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-2",children:"Maintenance Message"}),e.jsx("textarea",{value:t.maintenanceMessage,onChange:s=>c({...t,maintenanceMessage:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500 h-24",placeholder:"Enter the message to display during maintenance"})]}),e.jsxs("button",{onClick:N,disabled:p.isPending,className:"px-4 py-2 bg-neon-600 text-dark-950 rounded-lg hover:bg-neon-500 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:p.isPending?"Saving...":"Save Settings"})]})]})]}),e.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neon-400 mb-4",children:"Admin Profile"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:r.username,onChange:s=>u({...r,username:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>u({...r,email:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500"})]}),e.jsxs("button",{onClick:P,disabled:f.isPending,className:"px-4 py-2 bg-neon-600 text-dark-950 rounded-lg hover:bg-neon-500 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:f.isPending?"Saving...":"Save Profile"})]})]})]}),e.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neon-400 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",value:a.current,onChange:s=>i({...a,current:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500 pr-10"}),e.jsx("button",{type:"button",onClick:()=>v(!o),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-dark-400 hover:text-dark-300",children:o?e.jsx(E,{className:"h-4 w-4"}):e.jsx(F,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-2",children:"New Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:o?"text":"password",value:a.new,onChange:s=>i({...a,new:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500 pr-10"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-2",children:"Confirm New Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:o?"text":"password",value:a.confirm,onChange:s=>i({...a,confirm:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500 pr-10"})})]}),e.jsxs("button",{onClick:S,disabled:h.isPending,className:"px-4 py-2 bg-neon-600 text-dark-950 rounded-lg hover:bg-neon-500 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:h.isPending?"Changing...":"Change Password"})]})]})]})]})}export{L as Settings};
