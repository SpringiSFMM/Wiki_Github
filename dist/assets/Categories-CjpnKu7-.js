import{i as h,R as u,a as y,j as e,d,V as t}from"./index-D4ivp__p.js";import{u as m}from"./useMutation-D_tbq0G-.js";import{P as j,S as f,T as k}from"./trash-2-DuL1LNoS.js";function w(){const o=h(),[g,l]=u.useState(!1),[a,r]=u.useState(null),[n,i]=u.useState({name:"",description:""}),{data:p=[]}=y({queryKey:["categories"],queryFn:async()=>(await d.get("/api/admin/categories")).data}),c=m({mutationFn:async s=>d.post("/api/admin/categories",s),onSuccess:()=>{o.invalidateQueries({queryKey:["categories"]}),l(!1),i({name:"",description:""}),t.success("Category created successfully")},onError:()=>{t.error("Failed to create category")}}),x=m({mutationFn:async s=>d.put(`/api/admin/categories/${s.id}`,s),onSuccess:()=>{o.invalidateQueries({queryKey:["categories"]}),r(null),t.success("Category updated successfully")},onError:()=>{t.error("Failed to update category")}}),b=m({mutationFn:async s=>d.delete(`/api/admin/categories/${s}`),onSuccess:()=>{o.invalidateQueries({queryKey:["categories"]}),t.success("Category deleted successfully")},onError:()=>{t.error("Failed to delete category")}});return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-neon-400",children:"Categories"}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-neon-600 text-dark-950 rounded-lg hover:bg-neon-500 transition-colors",children:[e.jsx(j,{className:"h-5 w-5 mr-2"}),"New Category"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(s=>e.jsx("div",{className:"bg-dark-900 rounded-lg p-6 border border-dark-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-neon-400 mb-2",children:s.name}),e.jsx("p",{className:"text-dark-300 text-sm",children:s.description})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>r(s),className:"p-2 text-dark-200 hover:text-neon-400 rounded-lg",children:e.jsx(f,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b.mutate(s.id),className:"p-2 text-dark-200 hover:text-red-400 rounded-lg",children:e.jsx(k,{className:"h-4 w-4"})})]})]})},s.id))}),g&&e.jsx("div",{className:"fixed inset-0 bg-dark-950/75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-dark-900 rounded-xl p-6 max-w-md w-full border border-dark-800",children:[e.jsx("h3",{className:"text-xl font-semibold text-neon-400 mb-4",children:"Add New Category"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>i({...n,name:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500",placeholder:"Category name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-1",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:s=>i({...n,description:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500 h-24",placeholder:"Category description"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-dark-200 hover:text-dark-100",children:"Cancel"}),e.jsx("button",{onClick:()=>c.mutate(n),disabled:c.isPending,className:"px-4 py-2 bg-neon-600 text-dark-950 rounded-lg hover:bg-neon-500 disabled:opacity-50",children:c.isPending?"Creating...":"Create Category"})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-dark-950/75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-dark-900 rounded-xl p-6 max-w-md w-full border border-dark-800",children:[e.jsx("h3",{className:"text-xl font-semibold text-neon-400 mb-4",children:"Edit Category"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>r({...a,name:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-dark-200 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:s=>r({...a,description:s.target.value}),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-dark-100 focus:outline-none focus:border-neon-500 h-24"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 text-dark-200 hover:text-dark-100",children:"Cancel"}),e.jsx("button",{onClick:()=>x.mutate(a),disabled:x.isPending,className:"px-4 py-2 bg-neon-600 text-dark-950 rounded-lg hover:bg-neon-500 disabled:opacity-50",children:x.isPending?"Saving...":"Save Changes"})]})]})})]})}export{w as Categories};
