import{e as N,u as f,b as o,j as e,a as d}from"./index-Cf1eI5hH.js";import{R as $,L as c}from"./vendor-CPt1K6Li.js";import{F as x,u as y,i as u,w as A,x as C,E as q,y as E,z as K,D as T,V as p,J as D,K as S,k as F}from"./ui-Rj_xN0Fu.js";import{u as z}from"./auth-JTDanQEO.js";function L(){const h=N(),{user:n}=z(),{isDarkMode:t}=f(),[m,l]=$.useState(null),{data:a={totalArticles:0,totalViews:0,activeEditors:0,articlesThisMonth:0}}=o({queryKey:["dashboardStats"],queryFn:async()=>(await d.get("/api/admin/stats")).data,refetchInterval:1e4}),{data:g=[]}=o({queryKey:["recentArticles"],queryFn:async()=>{const r=await d.get("/api/admin/articles/recent");return Array.isArray(r.data)?r.data:[]},refetchInterval:1e4}),b=async r=>{try{await d.delete(`/api/admin/articles/${r}`),h.invalidateQueries({queryKey:["recentArticles"]}),h.invalidateQueries({queryKey:["dashboardStats"]}),p.success("Article deleted successfully"),l(null)}catch{p.error("Failed to delete article")}};a==null||a.totalArticles,x,a==null||a.totalViews,y,a==null||a.activeEditors,u,a==null||a.articlesThisMonth,A;const v=async()=>{try{return(await d.get("/api/admin/statistics")).data}catch(r){return console.error("Error fetching statistics:",r),{articles:0,categories:0,users:0,views:0}}},{data:s,isLoading:w}=o({queryKey:["adminStatistics"],queryFn:v}),j=[{title:"Artikel",value:(s==null?void 0:s.articles)||0,icon:e.jsx(x,{className:`w-8 h-8 ${t?"text-cyto-400":"text-cyto-600"}`}),gradient:t?"from-cyto-600/20 via-cyto-700/10 to-transparent":"from-cyto-500/20 via-cyto-600/10 to-transparent"},{title:"Kategorien",value:(s==null?void 0:s.categories)||0,icon:e.jsx(C,{className:`w-8 h-8 ${t?"text-cyto-400":"text-cyto-600"}`}),gradient:t?"from-cyto-600/20 via-cyto-700/10 to-transparent":"from-cyto-500/20 via-cyto-600/10 to-transparent"},{title:"Benutzer",value:(s==null?void 0:s.users)||0,icon:e.jsx(u,{className:`w-8 h-8 ${t?"text-cyto-400":"text-cyto-600"}`}),gradient:t?"from-cyto-600/20 via-cyto-700/10 to-transparent":"from-cyto-500/20 via-cyto-600/10 to-transparent"},{title:"Aufrufe",value:(s==null?void 0:s.views)||0,icon:e.jsx(y,{className:`w-8 h-8 ${t?"text-cyto-400":"text-cyto-600"}`}),gradient:t?"from-cyto-600/20 via-cyto-700/10 to-transparent":"from-cyto-500/20 via-cyto-600/10 to-transparent"}],k=[{title:"Artikel bearbeiten",description:"Vorhandene Artikel bearbeiten oder neue erstellen",icon:e.jsx(x,{className:`w-6 h-6 ${t?"text-cyto-400":"text-cyto-600"}`}),path:"/admin/articles"},{title:"Kategorien verwalten",description:"Kategorien erstellen, bearbeiten und löschen",icon:e.jsx(D,{className:`w-6 h-6 ${t?"text-cyto-400":"text-cyto-600"}`}),path:"/admin/categories"},{title:"Benutzer verwalten",description:"Benutzerkonten und Berechtigungen verwalten",icon:e.jsx(S,{className:`w-6 h-6 ${t?"text-cyto-400":"text-cyto-600"}`}),path:"/admin/users"},{title:"Einstellungen",description:"Wiki-Einstellungen und Konfiguration",icon:e.jsx(F,{className:`w-6 h-6 ${t?"text-cyto-400":"text-cyto-600"}`}),path:"/admin/settings"}];return e.jsxs("div",{className:`p-6 space-y-8 ${t?"bg-dark-950":"bg-gray-100"} min-h-screen`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-cyto-400":"text-cyto-600"}`,children:"Admin Dashboard"}),e.jsxs("p",{className:`mt-1 ${t?"text-dark-300":"text-gray-600"}`,children:["Willkommen zurück, ",(n==null?void 0:n.username)||"Admin"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{to:"/",className:`inline-flex items-center px-4 py-2 rounded-lg ${t?"bg-dark-800 text-dark-200 hover:bg-dark-700 hover:text-dark-100":"bg-white text-gray-600 hover:bg-gray-100 hover:text-gray-800"} transition-colors duration-300`,children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Wiki ansehen"]}),e.jsxs("button",{className:`inline-flex items-center px-4 py-2 rounded-lg ${t?"bg-cyto-600 text-white hover:bg-cyto-500":"bg-cyto-500 text-white hover:bg-cyto-600"} transition-colors duration-300`,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Neuer Artikel"]})]})]}),w?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(r=>e.jsxs("div",{className:`rounded-xl p-6 relative overflow-hidden ${t?"bg-dark-900/70 border-dark-800":"bg-white border-gray-100"} border shadow-sm animate-pulse`,children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-300 dark:bg-dark-700 mb-3"}),e.jsx("div",{className:"h-4 w-20 rounded bg-gray-300 dark:bg-dark-700 mb-2"}),e.jsx("div",{className:"h-6 w-12 rounded bg-gray-300 dark:bg-dark-700"})]},r))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((r,i)=>e.jsxs("div",{className:`rounded-xl p-6 relative overflow-hidden ${t?"bg-dark-900/70 border-dark-800":"bg-white border-gray-100"} border shadow-sm transition-all duration-300 hover:shadow-lg ${t?"hover:shadow-dark-950/30":"hover:shadow-gray-200/50"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.gradient} opacity-50`}),e.jsxs("div",{className:"relative z-10",children:[r.icon,e.jsx("h3",{className:`mt-3 font-medium ${t?"text-dark-300":"text-gray-500"}`,children:r.title}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${t?"text-white":"text-gray-900"}`,children:r.value})]})]},i))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:k.map((r,i)=>e.jsxs(c,{to:r.path,className:`rounded-xl p-6 flex items-start hover:shadow-lg transition-all duration-300 ${t?"bg-dark-900/70 border-dark-800 hover:shadow-dark-950/30 border":"bg-white hover:shadow-gray-200/50 border border-gray-100"}`,children:[e.jsx("div",{className:`rounded-xl p-3 mr-4 ${t?"bg-dark-800":"bg-gray-100"}`,children:r.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-lg ${t?"text-white":"text-gray-900"}`,children:r.title}),e.jsx("p",{className:`mt-1 ${t?"text-dark-300":"text-gray-500"}`,children:r.description})]})]},i))}),e.jsxs("div",{className:`rounded-xl border transition-all duration-300 ${t?"bg-dark-900 border-dark-800":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"p-6 border-b border-dark-800",children:e.jsx("h2",{className:`text-xl font-semibold ${t?"text-white":"text-dark-900"}`,children:"Recent Articles"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:t?"border-b border-dark-800 bg-dark-800/50":"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Author"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Category"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Last Modified"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium ${t?"text-dark-400":"text-gray-500"} uppercase tracking-wider`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-dark-800":"divide-gray-200"}`,children:g.length>0?g.map(r=>e.jsxs("tr",{className:`transition-colors ${t?"hover:bg-dark-800/50":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-white":"text-gray-900"}`,children:r.title}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-dark-300":"text-gray-500"}`,children:r.author}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-dark-300":"text-gray-500"}`,children:r.category}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t?"text-dark-300":"text-gray-500"}`,children:r.lastModified}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r.status==="published"?t?"bg-green-800/20 text-green-400":"bg-green-100 text-green-800":t?"bg-amber-800/20 text-amber-400":"bg-amber-100 text-amber-800"}`,children:r.status==="published"?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(c,{to:`/admin/articles/${r.id}`,className:`p-1 rounded-md ${t?"text-dark-300 hover:text-white hover:bg-dark-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>l(r.id),className:`p-1 rounded-md ${t?"text-dark-300 hover:text-white hover:bg-red-900/20":"text-gray-500 hover:text-gray-700 hover:bg-red-100"}`,children:e.jsx(T,{className:"h-4 w-4"})})]})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:`px-6 py-4 text-center text-sm ${t?"text-dark-300":"text-gray-500"}`,children:"No articles found"})})})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`rounded-xl p-6 max-w-md w-full ${t?"bg-dark-900":"bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Confirm Deletion"}),e.jsx("p",{className:`mb-6 ${t?"text-dark-300":"text-gray-500"}`,children:"Are you sure you want to delete this article? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>l(null),className:`px-4 py-2 rounded-lg ${t?"bg-dark-800 text-dark-300 hover:bg-dark-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:()=>b(m),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}export{L as Dashboard};
