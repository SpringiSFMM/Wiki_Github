import{e as k,u as N,b as w,j as e,a as l}from"./index-Cf1eI5hH.js";import{R as c}from"./vendor-CPt1K6Li.js";import{u}from"./useMutation-DI0lfsM0.js";import{y as $,z as C,D as K,X as b,V as n}from"./ui-Rj_xN0Fu.js";function F(){const d=k(),{isDarkMode:t}=N(),[y,o]=c.useState(!1),[s,a]=c.useState(null),[i,g]=c.useState({name:"",description:""}),[h,x]=c.useState(null),{data:m=[],isLoading:p}=w({queryKey:["categories"],queryFn:async()=>(await l.get("/api/admin/categories")).data}),f=u({mutationFn:async r=>l.post("/api/admin/categories",r),onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),o(!1),g({name:"",description:""}),n.success("Kategorie erfolgreich erstellt")},onError:()=>{n.error("Fehler beim Erstellen der Kategorie")}}),j=u({mutationFn:async r=>l.put(`/api/admin/categories/${r.id}`,r),onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),a(null),n.success("Kategorie erfolgreich aktualisiert")},onError:()=>{n.error("Fehler beim Aktualisieren der Kategorie")}}),v=u({mutationFn:async r=>l.delete(`/api/admin/categories/${r}`),onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),x(null),n.success("Kategorie erfolgreich gelöscht")},onError:()=>{n.error("Fehler beim Löschen der Kategorie")}});return e.jsxs("div",{className:`p-6 space-y-8 ${t?"bg-dark-950":"bg-gray-100"} min-h-screen`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-cyto-400":"text-cyto-600"}`,children:"Kategorien"}),e.jsxs("button",{onClick:()=>o(!0),className:`flex items-center px-4 py-2 ${t?"bg-cyto-600 hover:bg-cyto-500":"bg-cyto-500 hover:bg-cyto-600"} text-white rounded-lg transition-colors duration-300`,children:[e.jsx($,{className:"h-5 w-5 mr-2"}),"Neue Kategorie"]})]}),p?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent rounded-full border-cyto-500 animate-spin"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.length===0?e.jsx("div",{className:`col-span-full p-8 text-center rounded-xl border transition-all duration-300 ${t?"bg-dark-900 border-dark-800 text-dark-300":"bg-white border-gray-200 text-gray-500"}`,children:e.jsx("p",{children:"Keine Kategorien gefunden. Erstellen Sie Ihre erste Kategorie."})}):m.map(r=>e.jsx("div",{className:`rounded-xl p-6 border transition-all duration-300 hover:shadow-lg ${t?"bg-dark-900 border-dark-800 hover:shadow-dark-950/30":"bg-white border-gray-200 hover:shadow-gray-200/30"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-cyto-400":"text-cyto-600"} mb-2`,children:r.name}),e.jsx("p",{className:`${t?"text-dark-300":"text-gray-500"} text-sm`,children:r.description})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a(r),className:`p-2 rounded-lg transition-colors ${t?"text-dark-300 hover:text-white hover:bg-dark-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx(C,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(r.id),className:`p-2 rounded-lg transition-colors ${t?"text-dark-300 hover:text-white hover:bg-red-900/20":"text-gray-500 hover:text-gray-700 hover:bg-red-100"}`,children:e.jsx(K,{className:"h-4 w-4"})})]})]})},r.id))}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl p-6 max-w-md w-full ${t?"bg-dark-900":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:"Neue Kategorie"}),e.jsx("button",{onClick:()=>o(!1),className:`p-1 rounded-full ${t?"hover:bg-dark-800":"hover:bg-gray-100"}`,children:e.jsx(b,{className:`h-5 w-5 ${t?"text-dark-300":"text-gray-500"}`})})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),i.name&&f.mutate(i)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-sm font-medium ${t?"text-dark-200":"text-gray-700"}`,children:"Name"}),e.jsx("input",{type:"text",value:i.name,onChange:r=>g({...i,name:r.target.value}),className:`w-full px-3 py-2 rounded-lg border focus:ring-2 focus:outline-none transition-all ${t?"bg-dark-800 border-dark-700 text-white focus:ring-cyto-500/50":"bg-white border-gray-300 text-gray-900 focus:ring-cyto-500/30"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-sm font-medium ${t?"text-dark-200":"text-gray-700"}`,children:"Beschreibung"}),e.jsx("textarea",{value:i.description,onChange:r=>g({...i,description:r.target.value}),rows:3,className:`w-full px-3 py-2 rounded-lg border focus:ring-2 focus:outline-none transition-all ${t?"bg-dark-800 border-dark-700 text-white focus:ring-cyto-500/50":"bg-white border-gray-300 text-gray-900 focus:ring-cyto-500/30"}`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:`px-4 py-2 rounded-lg transition-colors ${t?"bg-dark-800 text-dark-300 hover:bg-dark-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Abbrechen"}),e.jsx("button",{type:"submit",className:`px-4 py-2 ${t?"bg-cyto-600 hover:bg-cyto-500":"bg-cyto-500 hover:bg-cyto-600"} text-white rounded-lg transition-colors`,children:"Erstellen"})]})]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl p-6 max-w-md w-full ${t?"bg-dark-900":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:"Kategorie bearbeiten"}),e.jsx("button",{onClick:()=>a(null),className:`p-1 rounded-full ${t?"hover:bg-dark-800":"hover:bg-gray-100"}`,children:e.jsx(b,{className:`h-5 w-5 ${t?"text-dark-300":"text-gray-500"}`})})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),s.name&&j.mutate(s)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-sm font-medium ${t?"text-dark-200":"text-gray-700"}`,children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>a({...s,name:r.target.value}),className:`w-full px-3 py-2 rounded-lg border focus:ring-2 focus:outline-none transition-all ${t?"bg-dark-800 border-dark-700 text-white focus:ring-cyto-500/50":"bg-white border-gray-300 text-gray-900 focus:ring-cyto-500/30"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-sm font-medium ${t?"text-dark-200":"text-gray-700"}`,children:"Beschreibung"}),e.jsx("textarea",{value:s.description,onChange:r=>a({...s,description:r.target.value}),rows:3,className:`w-full px-3 py-2 rounded-lg border focus:ring-2 focus:outline-none transition-all ${t?"bg-dark-800 border-dark-700 text-white focus:ring-cyto-500/50":"bg-white border-gray-300 text-gray-900 focus:ring-cyto-500/30"}`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>a(null),className:`px-4 py-2 rounded-lg transition-colors ${t?"bg-dark-800 text-dark-300 hover:bg-dark-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Abbrechen"}),e.jsx("button",{type:"submit",className:`px-4 py-2 ${t?"bg-cyto-600 hover:bg-cyto-500":"bg-cyto-500 hover:bg-cyto-600"} text-white rounded-lg transition-colors`,children:"Aktualisieren"})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl p-6 max-w-md w-full ${t?"bg-dark-900":"bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Löschen bestätigen"}),e.jsx("p",{className:`mb-6 ${t?"text-dark-300":"text-gray-500"}`,children:"Möchten Sie diese Kategorie wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>x(null),className:`px-4 py-2 rounded-lg ${t?"bg-dark-800 text-dark-300 hover:bg-dark-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-colors`,children:"Abbrechen"}),e.jsx("button",{onClick:()=>v.mutate(h),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Löschen"})]})]})})]})}export{F as Categories};
